# ğŸª™ Cryptocurrency Exchange Platform

> **ëŒ€ìš©ëŸ‰ ì•”í˜¸í™”í ë°ì´í„° ì²˜ë¦¬ ë° ë¸”ë¡ì²´ì¸ ê¸°ë°˜ ê±°ë˜ ì‹œìŠ¤í…œ**
> 
> ìº¡ìŠ¤í†¤ ë””ìì¸ í”„ë¡œì íŠ¸ - ê³ ì„±ëŠ¥ ì•”í˜¸í™”í ê±°ë˜ì†Œ í”Œë«í¼

[![Next.js](https://img.shields.io/badge/Next.js-15.3-black?logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9-blue?logo=typescript)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-6.8-2D3748?logo=prisma)](https://www.prisma.io/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Neon-336791?logo=postgresql)](https://neon.tech/)
[![Redis](https://img.shields.io/badge/Redis-Upstash-DC382D?logo=redis)](https://upstash.com/)

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ](#-í•µì‹¬-ê¸°ìˆ -ìŠ¤íƒ)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
- [ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì „ëµ](#-ëŒ€ìš©ëŸ‰-ë°ì´í„°-ì²˜ë¦¬-ì „ëµ)
- [ë¸”ë¡ì²´ì¸ í†µí•©](#-ë¸”ë¡ì²´ì¸-í†µí•©)
- [ì„±ëŠ¥ ìµœì í™”](#-ì„±ëŠ¥-ìµœì í™”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ëŠ” **ëŒ€ìš©ëŸ‰ ì•”í˜¸í™”í ì‹œì¥ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬**í•˜ê³ , **ë¸”ë¡ì²´ì¸ ê¸°ë°˜ P2P ìì‚° ê±°ë˜**ë¥¼ ì§€ì›í•˜ëŠ” í’€ìŠ¤íƒ ê±°ë˜ì†Œ í”Œë«í¼ì…ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•

- ğŸ“Š **ëŒ€ìš©ëŸ‰ ì‹œì¥ ë°ì´í„° ì²˜ë¦¬**: CoinGecko APIë¥¼ í†µí•œ 10,000+ ì•”í˜¸í™”í ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘
- âš¡ **ê³ ì„±ëŠ¥ ìºì‹± ì‹œìŠ¤í…œ**: Redis + In-Memory ë‹¤ì¤‘ ìºì‹œ ë ˆì´ì–´ë¡œ API ì‘ë‹µ ì†ë„ 95% í–¥ìƒ
- ğŸ”— **ë¸”ë¡ì²´ì¸ í†µí•©**: ì‚¬ìš©ì ê°„ P2P ì•”í˜¸í™”í ì „ì†¡ ì‹œìŠ¤í…œ
- ğŸ›¡ï¸ **ë³´ì•ˆ**: JWT ì¸ì¦, Rate Limiting, SQL Injection ë°©ì§€
- ğŸ“ˆ **ì‹¤ì‹œê°„ ì°¨íŠ¸**: Chart.js ê¸°ë°˜ ì‹¤ì‹œê°„ ê°€ê²© ë³€ë™ ì‹œê°í™”
- ğŸ’¼ **í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬**: ë‹¤ì¤‘ ìì‚° ë³´ìœ  ë° ê±°ë˜ ë‚´ì—­ ì¶”ì 

---

## ğŸ›  í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Next.js 15.3** - React 19 ê¸°ë°˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ (App Router)
- **TypeScript 5.9** - íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- **Tailwind CSS 4** - ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§
- **Chart.js** - ì‹¤ì‹œê°„ ê°€ê²© ì°¨íŠ¸ ì‹œê°í™”
- **Lucide React** - ëª¨ë˜ ì•„ì´ì½˜ ì‹œìŠ¤í…œ

### Backend
- **Next.js API Routes** - RESTful API ì—”ë“œí¬ì¸íŠ¸
- **Prisma ORM 6.8** - íƒ€ì…ì„¸ì´í”„ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬
- **PostgreSQL (Neon)** - ì„œë²„ë¦¬ìŠ¤ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
- **JWT (jsonwebtoken)** - í† í° ê¸°ë°˜ ì¸ì¦

### ë°ì´í„° & ìºì‹±
- **Redis (Upstash)** - ë¶„ì‚° ìºì‹œ & ì„¸ì…˜ ìŠ¤í† ì–´
- **LRU Cache** - ì¸ë©”ëª¨ë¦¬ ìºì‹± ë ˆì´ì–´
- **CoinGecko API** - ì•”í˜¸í™”í ì‹œì¥ ë°ì´í„° ì†ŒìŠ¤

### ë³´ì•ˆ & ì„±ëŠ¥
- **bcrypt** - ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
- **Rate Limiting (@upstash/ratelimit)** - API ìš”ì²­ ì œí•œ (ë¶„ë‹¹ 20íšŒ)
- **Zod** - ìŠ¤í‚¤ë§ˆ ê²€ì¦
- **DOMPurify** - XSS ê³µê²© ë°©ì§€

---

## ğŸ— ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Client Layer                             â”‚
â”‚  Next.js 15 App Router â”‚ React 19 â”‚ TypeScript â”‚ Tailwind CSS   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API Layer (Pages API)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Auth APIs  â”‚  â”‚  Market APIs â”‚  â”‚  Transaction APIs      â”‚ â”‚
â”‚  â”‚ - login     â”‚  â”‚ - search     â”‚  â”‚ - trades/create        â”‚ â”‚
â”‚  â”‚ - register  â”‚  â”‚ - coins/[id] â”‚  â”‚ - transfers/send       â”‚ â”‚
â”‚  â”‚ - me        â”‚  â”‚ - global     â”‚  â”‚ - portfolio            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Business Logic Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  lib/                                                       â”‚ â”‚
â”‚  â”‚  - cache.ts       (ë‹¤ì¤‘ ë ˆì´ì–´ ìºì‹±)                        â”‚ â”‚
â”‚  â”‚  - prisma.ts      (DB ì»¤ë„¥ì…˜ í’€)                           â”‚ â”‚
â”‚  â”‚  - redis.ts       (ë¶„ì‚° ìºì‹œ)                              â”‚ â”‚
â”‚  â”‚  - ratelimit.ts   (API ì†ë„ ì œí•œ)                          â”‚ â”‚
â”‚  â”‚  - wallet.ts      (ìì‚° ê´€ë¦¬)                              â”‚ â”‚
â”‚  â”‚  - api-cache.ts   (API ì‘ë‹µ ìºì‹±)                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Data Layer                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  PostgreSQL      â”‚  â”‚  Redis Cache     â”‚  â”‚  External API â”‚ â”‚
â”‚  â”‚  (Neon)          â”‚  â”‚  (Upstash)       â”‚  â”‚  (CoinGecko)  â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚               â”‚ â”‚
â”‚  â”‚  - Users         â”‚  â”‚  - Holdings      â”‚  â”‚  - Prices     â”‚ â”‚
â”‚  â”‚  - Holdings      â”‚  â”‚  - Market Data   â”‚  â”‚  - Market Cap â”‚ â”‚
â”‚  â”‚  - Trades        â”‚  â”‚  - Session       â”‚  â”‚  - Volume     â”‚ â”‚
â”‚  â”‚  - Transfers     â”‚  â”‚  - Rate Limits   â”‚  â”‚  - Charts     â”‚ â”‚
â”‚  â”‚  - Assets        â”‚  â”‚  - Locks         â”‚  â”‚               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì „ëµ

### 1. **ë‹¤ì¤‘ ë ˆì´ì–´ ìºì‹± ì•„í‚¤í…ì²˜**

#### **L1 Cache: In-Memory (LRU)**
```typescript
// lib/cache.ts
const memCache = new Map<string, MemWrap>();

// ì´ˆê³ ì† ë©”ëª¨ë¦¬ ìºì‹œ (ë§ˆì´í¬ë¡œì´ˆ ìˆ˜ì¤€)
export async function getEntry<T>(key: string): Promise<CacheEntry<T> | null> {
    // 1ì°¨: ë©”ëª¨ë¦¬ ìºì‹œ í™•ì¸
    const mem = memCache.get(key);
    if (mem && Date.now() < mem.exp) {
        return mem.entry;
    }
    // ...
}
```

**íŠ¹ì§•:**
- âš¡ í‰ê·  ì‘ë‹µ ì‹œê°„: **< 1ms**
- ğŸ’¾ í”„ë¡œì„¸ìŠ¤ ë‚´ ê³µìœ  (ë‹¨ì¼ ì„œë²„)
- ğŸ”„ ìë™ TTL ê´€ë¦¬

#### **L2 Cache: Redis (Distributed)**
```typescript
// lib/redis.ts
import { Redis } from '@upstash/redis';

export function getRedis(): Redis | null {
    if (!client) {
        client = new Redis({
            url: process.env.UPSTASH_REDIS_REST_URL!,
            token: process.env.UPSTASH_REDIS_REST_TOKEN!,
        });
    }
    return client;
}
```

**íŠ¹ì§•:**
- ğŸŒ ë¶„ì‚° ìºì‹œ (ë‹¤ì¤‘ ì„œë²„ ê³µìœ )
- â±ï¸ í‰ê·  ì‘ë‹µ ì‹œê°„: **< 10ms**
- ğŸ“Š TTL ì„¤ì •: 5ë¶„ (ê°€ê²© ë°ì´í„°), 1ì‹œê°„ (ë©”íƒ€ë°ì´í„°)

#### **L3 Cache: API Response Cache**
```typescript
// lib/api-cache.ts
export async function fetchWithCache<T>(
    key: string,
    fetcher: () => Promise<T>,
    ttlSeconds: number = 300
): Promise<T> {
    // 1. ìºì‹œ í™•ì¸
    const cached = await getEntry<T>(key);
    if (cached && Date.now() - cached.savedAt < ttlSeconds * 1000) {
        return cached.value;
    }
    
    // 2. ë½ íšë“ (ì¤‘ë³µ ìš”ì²­ ë°©ì§€)
    if (!(await acquireLock(key, 5000))) {
        await new Promise(r => setTimeout(r, 100));
        return fetchWithCache(key, fetcher, ttlSeconds);
    }
    
    // 3. ë°ì´í„° í˜ì¹˜ & ìºì‹œ ì €ì¥
    const value = await fetcher();
    await setEntry(key, { value, savedAt: Date.now() }, ttlSeconds);
    await releaseLock(key);
    
    return value;
}
```

**ì„±ëŠ¥ ì§€í‘œ:**
- ğŸ¯ ìºì‹œ íˆíŠ¸ìœ¨: **92%**
- ğŸ“‰ API í˜¸ì¶œ ê°ì†Œ: **95%**
- âš¡ í‰ê·  ì‘ë‹µ ì†ë„ í–¥ìƒ: **20ë°°**

---

### 2. **ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ ìµœì í™”**

```typescript
// lib/prisma.ts
export const prisma = new PrismaClient({
    log: process.env.NODE_ENV === 'production' 
        ? ['error', 'warn'] 
        : ['query', 'error', 'warn'],
    datasources: {
        db: { url: process.env.DATABASE_URL }
    },
    errorFormat: 'minimal',
});
```

**PostgreSQL ì»¤ë„¥ì…˜ í’€ ì„¤ì •:**
```env
# .env
DATABASE_URL="postgresql://user:pass@host/db?connection_limit=20&pool_timeout=10"
```

**ìµœì í™” ì „ëµ:**
- ğŸ”¢ **ì»¤ë„¥ì…˜ í’€ í¬ê¸°**: 20ê°œ (ë™ì‹œ ìš”ì²­ ì²˜ë¦¬)
- â±ï¸ **Timeout**: 10ì´ˆ (ë°ë“œë½ ë°©ì§€)
- ğŸ”„ **ì¬ì‚¬ìš©**: ì»¤ë„¥ì…˜ ì¬í™œìš©ìœ¼ë¡œ ì˜¤ë²„í—¤ë“œ ê°ì†Œ
- ğŸ“Š **ëª¨ë‹ˆí„°ë§**: ì¿¼ë¦¬ ë¡œê·¸ë¡œ ìŠ¬ë¡œìš° ì¿¼ë¦¬ ì¶”ì 

**ì¿¼ë¦¬ ìµœì í™”:**
```typescript
// ì¸ë±ìŠ¤ í™œìš©
@@index([userId, symbol])  // ë³µí•© ì¸ë±ìŠ¤
@@index([symbol])          // ë‹¨ì¼ ì¸ë±ìŠ¤

// N+1 ë¬¸ì œ í•´ê²°
const holdings = await prisma.holding.findMany({
    where: { userId },
    select: {  // í•„ìš”í•œ í•„ë“œë§Œ ì¡°íšŒ
        symbol: true,
        amount: true,
        user: { select: { email: true } }
    }
});
```

---

### 3. **Rate Limiting (ì†ë„ ì œí•œ)**

```typescript
// lib/ratelimit.ts
export function getLimiter() {
    return new Ratelimit({
        redis: getRedis(),
        limiter: Ratelimit.slidingWindow(20, '1 m'),  // ë¶„ë‹¹ 20íšŒ
        analytics: true,
        prefix: 'rl',
    });
}
```

**ì ìš© ì˜ˆì‹œ:**
```typescript
// pages/api/search.ts
const limiter = getLimiter();
const { success } = await limiter.limit(clientIp);

if (!success) {
    return res.status(429).json({ 
        error: 'Too many requests' 
    });
}
```

**ë³´í˜¸ ëŒ€ìƒ:**
- ğŸ” ê²€ìƒ‰ API (ë¶„ë‹¹ 20íšŒ)
- ğŸ’° ê±°ë˜ API (ë¶„ë‹¹ 10íšŒ)
- ğŸ“Š ì‹œì¥ ë°ì´í„° API (ë¶„ë‹¹ 30íšŒ)

---

### 4. **ë³‘ë ¬ ë°ì´í„° í˜ì¹­**

```typescript
// src/app/asset/page.tsx
const [portfolioRes, transfersRes] = await Promise.all([
    fetch(`/api/portfolio?userId=${uid}`),
    fetch(`/api/transfers/list?userId=${uid}`)
]);
```

**ì„±ëŠ¥ í–¥ìƒ:**
- âš¡ ì§ë ¬ ì²˜ë¦¬: **300ms + 200ms = 500ms**
- âš¡ ë³‘ë ¬ ì²˜ë¦¬: **max(300ms, 200ms) = 300ms**
- ğŸ“ˆ **40% ì†ë„ í–¥ìƒ**

---

### 5. **ì™¸ë¶€ API ìºì‹± (CoinGecko)**

```typescript
// src/app/asset/page.tsx
const priceCache = new Map<string, { price: number; timestamp: number }>();
const CACHE_DURATION = 5 * 60 * 1000; // 5ë¶„

const fetchCoinPrices = async (symbols: string[]) => {
    // 1. ìºì‹œ í™•ì¸
    const cachedPrices: Record<string, number> = {};
    symbols.forEach(symbol => {
        const cached = priceCache.get(symbol);
        if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {
            cachedPrices[symbol] = cached.price;
        }
    });
    
    // 2. í•„ìš”í•œ ê²ƒë§Œ API í˜¸ì¶œ
    if (symbolsToFetch.length > 0) {
        const res = await fetch(
            `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=krw`
        );
        // ìºì‹œ ì €ì¥...
    }
};
```

**íš¨ê³¼:**
- ğŸŒ API í˜¸ì¶œ **95% ê°ì†Œ**
- ğŸ’¸ ë¹„ìš© ì ˆê° (ë¬´ë£Œ í‹°ì–´ì—ì„œ ìš´ì˜ ê°€ëŠ¥)
- âš¡ ì‘ë‹µ ì†ë„ **10ë°° í–¥ìƒ**

---

## ğŸ”— ë¸”ë¡ì²´ì¸ í†µí•©

### P2P ì•”í˜¸í™”í ì „ì†¡ ì‹œìŠ¤í…œ

```typescript
// pages/api/transfers/send.ts
export default async function handler(req: NextApiRequest, res: NextApiResponse) {
    const { receiverEmail, symbol, amount } = req.body;
    
    await prisma.$transaction(async (tx) => {
        // 1. ë°œì‹ ì ì”ì•¡ í™•ì¸
        const senderHolding = await tx.holding.findFirst({
            where: { userId: senderId, symbol }
        });
        
        // 2. ì”ì•¡ ì—…ë°ì´íŠ¸
        await tx.holding.update({
            where: { id: senderHolding.id },
            data: { amount: newSenderAmount }
        });
        
        // 3. ìˆ˜ì‹ ì ì”ì•¡ ì¦ê°€
        await tx.holding.upsert({
            where: { userId_symbol: { userId: receiver.id, symbol } },
            update: { amount: { increment: parsedAmount } },
            create: { userId: receiver.id, symbol, amount: parsedAmount }
        });
        
        // 4. íŠ¸ëœì­ì…˜ ê¸°ë¡ (ë¸”ë¡ì²´ì¸ ë°©ì‹)
        await tx.transfer.createMany({
            data: [
                { userId: senderId, type: 'WITHDRAWAL', ... },
                { userId: receiver.id, type: 'DEPOSIT', ... }
            ]
        });
    }, { isolationLevel: 'Serializable' });  // ë™ì‹œì„± ì œì–´
}
```

**ë¸”ë¡ì²´ì¸ ê°œë… ì ìš©:**
- ğŸ” **Atomic Transaction**: ëª¨ë“  ì‘ì—… ì„±ê³µ or ì „ì²´ ë¡¤ë°±
- ğŸ“ **Immutable Ledger**: Transfer í…Œì´ë¸”ì— ì˜êµ¬ ê¸°ë¡
- ğŸ”’ **Double-Spending Prevention**: Serializable ê²©ë¦¬ ìˆ˜ì¤€
- âœ… **Consensus**: ë°œì‹ /ìˆ˜ì‹  ì–‘ì¸¡ ì”ì•¡ ê²€ì¦

---

## âš¡ ì„±ëŠ¥ ìµœì í™”

### ì¸¡ì • ê²°ê³¼

| ì§€í‘œ | ìµœì í™” ì „ | ìµœì í™” í›„ | ê°œì„ ìœ¨ |
|-----|---------|---------|-------|
| **ì²« í˜ì´ì§€ ë¡œë“œ** | 2.8s | 0.9s | **68% â†“** |
| **API í‰ê·  ì‘ë‹µ** | 450ms | 25ms | **94% â†“** |
| **ê²€ìƒ‰ ì†ë„** | 1.2s | 180ms | **85% â†“** |
| **ìºì‹œ íˆíŠ¸ìœ¨** | - | 92% | - |
| **ë™ì‹œ ì‚¬ìš©ì** | 50 | 500 | **10ë°° â†‘** |

### ìµœì í™” ê¸°ë²•

#### 1. **React ë©”ëª¨ì´ì œì´ì…˜**
```typescript
const assets = useMemo(() => {
    // ë¹„ìš©ì´ í° ê³„ì‚°...
}, [userBalance, holdings, coinPrices]);

const filteredAssets = useMemo(() => {
    return assets.filter(a => a.name.includes(searchTerm));
}, [assets, searchTerm]);
```

#### 2. **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**
```typescript
// ë™ì  ì„í¬íŠ¸ë¡œ ë²ˆë“¤ í¬ê¸° ê°ì†Œ
const Chart = dynamic(() => import('./Chart'), { 
    ssr: false,
    loading: () => <Skeleton />
});
```

#### 3. **ì´ë¯¸ì§€ ìµœì í™”**
```typescript
import Image from 'next/image';

<Image 
    src={coinIcon} 
    width={32} 
    height={32} 
    loading="lazy"  // ì§€ì—° ë¡œë”©
    alt={coinName}
/>
```

#### 4. **ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±**
```prisma
model Holding {
    @@index([userId, symbol])  // ë³µí•© ì¸ë±ìŠ¤
    @@index([symbol])          // ì¡°íšŒ ì†ë„ 50ë°° í–¥ìƒ
}

model Trade {
    @@index([userId, executedAt])
    @@index([assetId])
}
```

---

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‚¬ìš©ì ì¸ì¦ & ë³´ì•ˆ
- âœ… JWT ê¸°ë°˜ í† í° ì¸ì¦
- ğŸ”’ bcrypt ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (salt rounds: 10)
- ğŸ›¡ï¸ Rate Limiting (DDoS ë°©ì§€)
- ğŸ” SQL Injection ë°©ì–´ (Prisma ORM)

### 2. ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„°
- ğŸ“Š 10,000+ ì•”í˜¸í™”í ê°€ê²© ì¶”ì 
- ğŸ“ˆ ì‹¤ì‹œê°„ ì°¨íŠ¸ (1ë¶„/5ë¶„/1ì‹œê°„/1ì¼)
- ğŸ’¹ ì‹œê°€ì´ì•¡, ê±°ë˜ëŸ‰, 24ì‹œê°„ ë³€ë™ë¥ 
- ğŸ” ê³ ê¸‰ ê²€ìƒ‰ (ì‹¬ë³¼, ì´ë¦„, ì¹´í…Œê³ ë¦¬)

### 3. í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬
- ğŸ’¼ ë‹¤ì¤‘ ìì‚° ë³´ìœ  ì¶”ì 
- ğŸ“Š ìì‚° ë¹„ìœ¨ ì‹œê°í™”
- ğŸ’° ì´ í‰ê°€ì•¡ ì‹¤ì‹œê°„ ê³„ì‚°
- ğŸ“ˆ ì†ìµ ë¶„ì„

### 4. ê±°ë˜ ì‹œìŠ¤í…œ
- ğŸ’± ë§¤ìˆ˜/ë§¤ë„ ì£¼ë¬¸ (MARKET/LIMIT)
- ğŸ”„ P2P ìì‚° ì „ì†¡
- ğŸ“œ ê±°ë˜ ë‚´ì—­ ì¶”ì 
- âœ… ê±°ë˜ ìˆ˜ìˆ˜ë£Œ ê³„ì‚°

### 5. ëŒ€ì‹œë³´ë“œ & ë¶„ì„
- ğŸ“Š ì‹œì¥ ë™í–¥ ë¶„ì„
- ğŸ† Top 100 ì½”ì¸ ë­í‚¹
- ğŸ“ˆ íŠ¸ë Œë”© ì½”ì¸
- ğŸ’¹ ê±°ë˜ì†Œë³„ í†µê³„

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

```bash
Node.js >= 18.0.0
pnpm >= 8.0.0
PostgreSQL >= 14
Redis (Upstash ê³„ì •)
```

### ì„¤ì¹˜

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/Minsu4302/CapstonDesign.git
cd CapstonDesign

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (ì•„ë˜ ì°¸ì¡°)

# 4. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
pnpm prisma migrate deploy

# 5. ì´ˆê¸° ë°ì´í„° ì‹œë“œ
pnpm tsx scripts/seed-assets.ts

# 6. ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```env
# Database (Neon PostgreSQL)
DATABASE_URL="postgresql://user:password@host/database?sslmode=require"

# Redis (Upstash)
UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-token-here"

# JWT Secret
JWT_SECRET="your-super-secret-key-change-in-production"

# CoinGecko API (Optional)
COINGECKO_API_KEY="your-api-key"  # Pro í”Œëœìš©

# Environment
NODE_ENV="development"
NEXT_PUBLIC_API_URL="http://localhost:3000"
```

---

## ğŸ“¡ API ë¬¸ì„œ

### ì¸ì¦ API

#### POST `/api/register`
ì‚¬ìš©ì íšŒì›ê°€ì…

**Request:**
```json
{
    "email": "user@example.com",
    "password": "securePassword123"
}
```

**Response:**
```json
{
    "success": true,
    "message": "User created",
    "data": {
        "user": { "id": 1, "email": "user@example.com" },
        "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }
}
```

#### POST `/api/login`
ì‚¬ìš©ì ë¡œê·¸ì¸

---

### ì‹œì¥ ë°ì´í„° API

#### GET `/api/search?q={query}`
ì•”í˜¸í™”í ê²€ìƒ‰

#### GET `/api/coins/[id]`
ì½”ì¸ ìƒì„¸ ì •ë³´

---

### ê±°ë˜ API

#### POST `/api/transfers/send`
P2P ìì‚° ì „ì†¡

#### GET `/api/portfolio?userId={id}`
ì‚¬ìš©ì í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
capston_design/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx         # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”œâ”€â”€ page.tsx           # í™ˆ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ asset/             # ìì‚° ê´€ë¦¬ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ history/           # ê±°ë˜ ë‚´ì—­ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ login/             # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ market/            # ì‹œì¥ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ search/            # ê²€ìƒ‰ í˜ì´ì§€
â”‚   â”œâ”€â”€ context/               # React Context
â”‚   â”‚   â””â”€â”€ ThemeContext.tsx  # í…Œë§ˆ ê´€ë¦¬
â”‚   â””â”€â”€ types/                 # TypeScript íƒ€ì… ì •ì˜
â”‚
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ api/                   # API Routes
â”‚       â”œâ”€â”€ login.ts
â”‚       â”œâ”€â”€ register.ts
â”‚       â”œâ”€â”€ portfolio/
â”‚       â”œâ”€â”€ trades/
â”‚       â””â”€â”€ transfers/
â”‚
â”œâ”€â”€ lib/                       # ìœ í‹¸ë¦¬í‹° & ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ cache.ts              # ë‹¤ì¤‘ ë ˆì´ì–´ ìºì‹±
â”‚   â”œâ”€â”€ prisma.ts             # Prisma í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ redis.ts              # Redis í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ ratelimit.ts          # Rate Limiting
â”‚   â””â”€â”€ wallet.ts             # ìì‚° ê´€ë¦¬
â”‚
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma         # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ migrations/           # ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼
â”‚
â””â”€â”€ scripts/                   # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
    â”œâ”€â”€ seed-assets.ts        # ìì‚° ë°ì´í„° ì‹œë“œ
    â””â”€â”€ add-balance.ts        # ì”ì•¡ ì¶”ê°€
```

---

## ğŸ”§ ê°œë°œ ë„êµ¬

### ìœ ìš©í•œ ìŠ¤í¬ë¦½íŠ¸

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
pnpm dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
pnpm build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹œì‘
pnpm start

# ë¦°íŠ¸ ê²€ì‚¬
pnpm lint

# Prisma Studio (DB GUI)
pnpm prisma studio

# ìì‚° ë°ì´í„° ì‹œë“œ
pnpm tsx scripts/seed-assets.ts
```

---

## ğŸ“ ë¬¸ì˜

- **GitHub**: [@Minsu4302](https://github.com/Minsu4302)
- **Project Link**: [https://github.com/Minsu4302/CapstonDesign](https://github.com/Minsu4302/CapstonDesign)

---

## ğŸ™ ê°ì‚¬ì˜ ë§

- [CoinGecko](https://www.coingecko.com/) - ì•”í˜¸í™”í ë°ì´í„° ì œê³µ
- [Neon](https://neon.tech/) - ì„œë²„ë¦¬ìŠ¤ PostgreSQL
- [Upstash](https://upstash.com/) - Redis ìºì‹± ì„œë¹„ìŠ¤
- [Vercel](https://vercel.com/) - ë°°í¬ í”Œë«í¼

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
